---
import "../styles/global.css";
import { SEO } from "astro-seo";

interface Props {
  title?: string;
  description?: string;
}

const {
  title = "Fotografia Komunijna — Profesjonalna Fotografia Pierwszej Komunii Świętej",
  description = "Profesjonalna fotografia Pierwszej Komunii Świętej. Uwiecznij ten wyjątkowy dzień Twojego dziecka. Naturalne, pełne emocji zdjęcia komunijne.",
} = Astro.props;

const siteUrl = Astro.site?.href ?? "https://fotografkomunijny.pl";
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).href;
---

<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />

    <SEO
      title={title}
      description={description}
      canonical={canonicalUrl}
      noindex={false}
      nofollow={false}
      openGraph={{
        basic: {
          title: title,
          type: "website",
          image: "",
          url: canonicalUrl,
        },
        optional: {
          description: description,
          locale: "pl_PL",
          siteName: "Fotografia Komunijna",
        },
      }}
      twitter={{
        card: "summary_large_image",
        title: title,
        description: description,
      }}
      extend={{
        meta: [
          { name: "author", content: "Fotografia Komunijna" },
          { name: "theme-color", content: "#b8860b" },
        ],
      }}
    />

    <!-- Google Fonts: Cormorant Garamond (display) + Lato (body) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <meta name="generator" content={Astro.generator} />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Fotografia Komunijna",
      "description": description,
      "image": "",
      "url": canonicalUrl,
      "@id": canonicalUrl,
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Polska",
        "addressCountry": "PL"
      },
      "additionalType": "https://schema.org/Photographer",
      "makesOffer": [
        {
          "@type": "Offer",
          "name": "Reportaż komunijny",
          "description": "Profesjonalna fotografia Pierwszej Komunii Świętej"
        }
      ]
    })} />
  </head>
  <body class="min-h-screen">
    <slot />

    <!-- Scroll-reveal IntersectionObserver -->
    <script>
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.15, rootMargin: "0px 0px -40px 0px" }
      );

      document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
